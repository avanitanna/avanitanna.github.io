<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Recipe Finder Agent using smolagents | Avani Tanna </title> <meta name="author" content="Avani Tanna"> <meta name="description" content="Recipe recommendation"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://avanitanna.github.io/blog/2025/hf-recipe-agent/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Avani</span> Tanna </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching_mentoring/">teaching and mentoring </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Recipe Finder Agent using smolagents</h1> <p class="post-meta"> Created in February 16, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>As an AI enthusiast and home cook, I built a Recipe Finder Agent using Hugging Face’s smolagents framework. This agent is designed to solve a common problem: figuring out what to cook with the ingredients you already have, while respecting dietary restrictions and cuisine preferences. The agent articularly focus on the crucial “thought-action-observation” cycle that drives its behavior. <a href="https://github.com/huggingface/smolagents" rel="external nofollow noopener" target="_blank">Smolagents</a> is a library that focuses on <code class="language-plaintext highlighter-rouge">codeAgent</code>, a kind of agent that performs “Actions” through code blocks, and then “Observes” results by executing the code.</p> <h4 id="what-makes-an-agent-agentic">What makes an Agent “Agentic”?</h4> <p>Before diving into implementation details, let’s clarify what we mean by an “agentic workflow.” Unlike traditional software that follows predefined paths, an agentic system:</p> <ul> <li>Perceives its environment through data inputs</li> <li>Thinks and decides on appropriate actions through reasoning</li> <li>Acts using available tools</li> <li>Observes and learns from the results of those actions</li> </ul> <h4 id="project-overview-the-recipe-finder-agent">Project Overview: The Recipe Finder Agent</h4> <p>The Recipe Finder Agent is designed to solve a common household problem: What can I cook with what I have? By combining LLM capabilities with domain-specific tools, this agent helps you discover recipes based on:</p> <ul> <li>Ingredients you have available</li> <li>Dietary restrictions</li> <li>Cuisine type preferences</li> <li>Optionally suggest your favorite recipe sites</li> </ul> <p>Thought-Action-Observation cycle: The agent works by leveraging the ReAct approach through which the agent is able to “think” step by step in order to generate a plan before jumping to the final answer. Thoughts represent the Agent’s internal reasoning and planning processes to solve the task and are responsible for accessing current observations and decide what the next action(s) should be. Actions are the concrete steps the AI agent takes to interact with its environment. For example, a code agent writes a code block that is interpreted externally. Observations are how an Agent perceives the consequences of its actions. The information provided by observations feeds back into the agent and improves its thought process and guides future actions.</p> <h4 id="component-architecture-and-implementation">Component Architecture and Implementation</h4> <p>The agent setup combines and consists of several key components:</p> <ul> <li>A language model (Qwen2.5-Coder-32B)</li> <li>Specialized tools for web search (using duckduckgo search), and webpage visiting,</li> <li>A recipe-finding tool that leverages these lower-level tools and considers user’s preferences (e.g., available ingredients, dietary restrictions and cuisine type)</li> <li>Custom prompt templates that define the agent’s reasoning process</li> </ul> <p>At the heart of an effective agent lies its prompting strategy - check out <code class="language-plaintext highlighter-rouge">prompts.yml</code> to look at the critical Thought-Action-Observation cycle.</p> <p>The power of the recipe finder agent comes from the specialized <code class="language-plaintext highlighter-rouge">AdvancedRecipeFinderTool</code> that orchestrates lower-level tools. The recipe finding tool demonstrates a crucial principle: <code class="language-plaintext highlighter-rouge">composability</code>. It leverages lower-level tools (web search and webpage parsing) to create a higher-level capability (recipe finding). This composability is what allows the agent to tackle increasingly complex tasks.</p> <p>Another critical aspect of the agent implementation is the planning process. The prompt templates include specialized sections for initial planning and plan updates. Planning is what:</p> <ul> <li>Forces the agent to think ahead rather than react impulsively</li> <li>Helps the agent decompose complex problems into manageable steps</li> <li>Provides a framework for handling unexpected results by updating the plan</li> </ul> <p>The system also uses a clever fact-tracking mechanism to maintain context.</p> <p>Check out this <a href="https://huggingface.co/spaces/vntnn/First_agent_template/tree/main" rel="external nofollow noopener" target="_blank">repo</a> for implementation details.</p> <h4 id="recommended-how-to-run-the-codeagent-more-securely">[Recommended] How to run the codeAgent (more securely):</h4> <p>Here are some recommendations:</p> <ul> <li>Note that you’ll have to set your HF token first in an <code class="language-plaintext highlighter-rouge">.env</code> file if you choose to use dotenv.</li> <li>It is recommended to run a code agent using a docker container, e.g., <code class="language-plaintext highlighter-rouge">docker run -it ubuntu:latest bin/bash</code>.</li> <li>[Warning!] Once you run <code class="language-plaintext highlighter-rouge">python3 app.py</code>, it spawns a public URL that is linked to your container. HF claims that it runs using a secure local Python Interpretor https://smolagents.org/docs/secure-code-execution-of-smolagents/.</li> </ul> <h4 id="building-your-own-agentic-workflows">Building your own agentic workflows</h4> <p>Here are some key principles for effective agentic workflows:</p> <ul> <li>Structure the Thought-Action-Observation Cycle The explicit cycle of thinking, acting, and observing is what separates agents from simple LLM calls. Also ensure that your prompts enforce this cycle.</li> <li>Take advantage of Tool Composability Design tools that can be combined in flexible ways. The power of agents comes from composing simple tools to solve complex problems.</li> <li>Implement Explicit Planning Force the agent to create and update plans. This makes the agent more strategic and helps it recover from failures.</li> <li>Track Facts Systematically Implement a system for the agent to track what it knows, what it has learned, and what it still needs to discover. This helps it make better decisions.</li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/cashflow-1/">[Part 1] Unlocking the Power of LLMs for the Cashflow Game</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Avani Tanna. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>